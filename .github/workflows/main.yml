name: mtajjiou-group/vlc-unity
on:
  push:
  workflow_dispatch:
concurrency:
  group: "${{ github.ref }}"
  cancel-in-progress: true
jobs:
  libvlc-android-armv7:
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_ANDROID_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ANDROID_ABI: armeabi-v7a
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: |
        git clone REDACTED-android && cd vlc-android
        git clone REDACTED && cd libvlcjni
        git clone REDACTED --depth=1
        git apply ../../patches/no-libvlcjni-build.patch
        cd ..
        ANDROID_HOME=/sdk/android-sdk-linux ./buildsystem/compile.sh -l -b -r -a ${ANDROID_ABI}
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc-android/libvlcjni/libvlc/jni
          vlc-android/libvlcjni/vlc/include
          vlc-android/libvlcjni/libvlc/build/intermediates/aar_main_jar/release/classes.jar
  libvlc-android-armv8:
    runs-on: ubuntu-latest
    container:
      image: "$VLC_ANDROID_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ANDROID_ABI: arm64-v8a
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: |
        git clone REDACTED-android && cd vlc-android
        git clone REDACTED && cd libvlcjni
        git clone REDACTED --depth=1
        git apply ../../patches/no-libvlcjni-build.patch
        cd ..
        ANDROID_HOME=/sdk/android-sdk-linux ./buildsystem/compile.sh -l -b -r -a ${ANDROID_ABI}
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc-android/libvlcjni/libvlc/jni
          vlc-android/libvlcjni/vlc/include
          vlc-android/libvlcjni/libvlc/build/intermediates/aar_main_jar/release/classes.jar
  libvlc-android-x86:
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_ANDROID_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ANDROID_ABI: x86
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: |
        git clone REDACTED-android && cd vlc-android
        git clone REDACTED && cd libvlcjni
        git clone REDACTED --depth=1
        git apply ../../patches/no-libvlcjni-build.patch
        cd ..
        ANDROID_HOME=/sdk/android-sdk-linux ./buildsystem/compile.sh -l -b -r -a ${ANDROID_ABI}
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc-android/libvlcjni/libvlc/jni
          vlc-android/libvlcjni/vlc/include
          vlc-android/libvlcjni/libvlc/build/intermediates/aar_main_jar/release/classes.jar
  libvlc-android-x86_64:
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_ANDROID_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ANDROID_ABI: x86_64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: |
        git clone REDACTED-android && cd vlc-android
        git clone REDACTED && cd libvlcjni
        git clone REDACTED --depth=1
        git apply ../../patches/no-libvlcjni-build.patch
        cd ..
        ANDROID_HOME=/sdk/android-sdk-linux ./buildsystem/compile.sh -l -b -r -a ${ANDROID_ABI}
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc-android/libvlcjni/libvlc/jni
          vlc-android/libvlcjni/vlc/include
          vlc-android/libvlcjni/libvlc/build/intermediates/aar_main_jar/release/classes.jar
  libvlc-win-x86_64-debug:
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_WIN_LLVM_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      WINE_SDK_PATH: "/usr/include/wine/wine/windows/"
      ARGS: "-c -z -d -x -a x86_64 -g l"
      ARTIFACT: vlc-4.0.0-dev-win64-debug.7z
      BUILD_FOLDER: win64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: |
        git clone REDACTED && cd vlc
        git apply ../patches/disable-activex.patch
        if [[ $ARGS == *"-w"* ]]; then
            echo "Applying the UWP specific patch"
            git apply ../patches/uwp-plugins-path.patch
        fi
        extras/package/win32/build.sh $ARGS
    - run: mkdir nightlies
      if: always()
    - run: cd ./vlc/$BUILD_FOLDER
      if: always()
    - run: make package-win-strip
      if: always()
    - run: rm -rf vlc-4.0.0-dev/lua/http
      if: always()
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc/${BUILD_FOLDER}/vlc-4.0.0-dev
          vlc/${BUILD_FOLDER}/_win32
  libvlc-win-x86_64:
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_WIN_LLVM_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      WINE_SDK_PATH: "/usr/include/wine/wine/windows/"
      ARGS: "-c -z -r -x -a x86_64 -i nope -g l"
      ARTIFACT: vlc-4.0.0-dev-win64.7z
      BUILD_FOLDER: win64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: |
        git clone REDACTED && cd vlc
        git apply ../patches/disable-activex.patch
        if [[ $ARGS == *"-w"* ]]; then
            echo "Applying the UWP specific patch"
            git apply ../patches/uwp-plugins-path.patch
        fi
        extras/package/win32/build.sh $ARGS
    - run: mkdir nightlies
      if: always()
    - run: cd ./vlc/$BUILD_FOLDER
      if: always()
    - run: make package-win-strip
      if: always()
    - run: rm -rf vlc-4.0.0-dev/lua/http
      if: always()
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc/${BUILD_FOLDER}/vlc-4.0.0-dev
          vlc/${BUILD_FOLDER}/_win32
  libvlc-uwp-x64:
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_UWP_LLVM_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      WINE_SDK_PATH: "/usr/include/wine/wine/windows/"
      ARGS: "-w -u -c -z -r -x -a x86_64 -i nope -S 0x0A000007 -g l"
      ARTIFACT: vlc-4.0.0-dev-win64.7z
      BUILD_FOLDER: win64-uwp
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: |
        git clone REDACTED && cd vlc
        git apply ../patches/disable-activex.patch
        if [[ $ARGS == *"-w"* ]]; then
            echo "Applying the UWP specific patch"
            git apply ../patches/uwp-plugins-path.patch
        fi
        extras/package/win32/build.sh $ARGS
    - run: mkdir nightlies
      if: always()
    - run: cd ./vlc/$BUILD_FOLDER
      if: always()
    - run: make package-win-strip
      if: always()
    - run: rm -rf vlc-4.0.0-dev/lua/http
      if: always()
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc/${BUILD_FOLDER}/vlc-4.0.0-dev
          vlc/${BUILD_FOLDER}/_win32
  libvlc-uwp-arm64:
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_UWP_LLVM_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      WINE_SDK_PATH: "/usr/include/wine/wine/windows/"
      ARGS: "-w -u -c -z -r -x -a aarch64 -i nope -S 0x0A000007 -g l"
      ARTIFACT: vlc-4.0.0-dev-win64.7z
      BUILD_FOLDER: winarm64-uwp
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: |
        git clone REDACTED && cd vlc
        git apply ../patches/disable-activex.patch
        if [[ $ARGS == *"-w"* ]]; then
            echo "Applying the UWP specific patch"
            git apply ../patches/uwp-plugins-path.patch
        fi
        extras/package/win32/build.sh $ARGS
    - run: mkdir nightlies
      if: always()
    - run: cd ./vlc/$BUILD_FOLDER
      if: always()
    - run: make package-win-strip
      if: always()
    - run: rm -rf vlc-4.0.0-dev/lua/http
      if: always()
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc/${BUILD_FOLDER}/vlc-4.0.0-dev
          vlc/${BUILD_FOLDER}/_win32
  libvlc-uwp-x64-debug:
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_UWP_LLVM_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      WINE_SDK_PATH: "/usr/include/wine/wine/windows/"
      ARGS: "-w -u -c -z -d -x -a x86_64 -S 0x0A000007 -g l"
      ARTIFACT: vlc-4.0.0-dev-win64-debug.7z
      BUILD_FOLDER: win64-uwp
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: |
        git clone REDACTED && cd vlc
        git apply ../patches/disable-activex.patch
        if [[ $ARGS == *"-w"* ]]; then
            echo "Applying the UWP specific patch"
            git apply ../patches/uwp-plugins-path.patch
        fi
        extras/package/win32/build.sh $ARGS
    - run: mkdir nightlies
      if: always()
    - run: cd ./vlc/$BUILD_FOLDER
      if: always()
    - run: make package-win-strip
      if: always()
    - run: rm -rf vlc-4.0.0-dev/lua/http
      if: always()
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc/${BUILD_FOLDER}/vlc-4.0.0-dev
          vlc/${BUILD_FOLDER}/_win32
  libvlc-macos-x86_64:
    runs-on:
      - self-hosted
      - monterey
      - amd64
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARGS: "-i z -c -g l"
      ARCH: x86_64
      VLC_PATH: "/Users/videolanci/sandbox/bin"
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: git clone REDACTED && cd vlc
    - run: mkdir build && cd build
    - run: "../extras/package/macosx/build.sh ${ARGS} -a ${ARCH}"
    - run: rm -rf macos-install/lib/libvlc.dylib
    - run: rm -rf macos-install/lib/libvlccore.dylib
    - run: mv macos-install/lib/libvlc.12.dylib macos-install/lib/libvlc.dylib
    - run: mv macos-install/lib/libvlccore.9.dylib macos-install/lib/libvlccore.dylib
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc/build/macos-install/include/*
          vlc/build/macos-install/libexec/*
          vlc/build/macos-install/lib/pkgconfig/*
          vlc/build/macos-install/lib/vlc/**/*.dylib
          vlc/build/macos-install/lib/libvlc.dylib
          vlc/build/macos-install/lib/libvlccore.dylib
  libvlc-macos-aarch64:
    runs-on:
      - self-hosted
      - monterey
      - macos-m1
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARGS: "-i z -c -g l"
      ARCH: aarch64
      VLC_PATH: "/Users/videolanci/sandbox/bin"
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: git clone REDACTED && cd vlc
    - run: mkdir build && cd build
    - run: "../extras/package/macosx/build.sh ${ARGS} -a ${ARCH}"
    - run: rm -rf macos-install/lib/libvlc.dylib
    - run: rm -rf macos-install/lib/libvlccore.dylib
    - run: mv macos-install/lib/libvlc.12.dylib macos-install/lib/libvlc.dylib
    - run: mv macos-install/lib/libvlccore.9.dylib macos-install/lib/libvlccore.dylib
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc/build/macos-install/include/*
          vlc/build/macos-install/libexec/*
          vlc/build/macos-install/lib/pkgconfig/*
          vlc/build/macos-install/lib/vlc/**/*.dylib
          vlc/build/macos-install/lib/libvlc.dylib
          vlc/build/macos-install/lib/libvlccore.dylib
  libvlc-ios-x86_64:
    runs-on:
      - self-hosted
      - monterey
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARCH: x86_64
      SDKNAME: iphonesimulator
      VLC_PATH: "/Users/videolanci/sandbox/bin"
      SHORT_ARCH: x86_64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: git clone REDACTED && cd vlc
    - run: mkdir build && cd build
    - run: "../extras/package/apple/build.sh --sdk=$SDKNAME --arch=$ARCH -j8 --enable-shared"
    - run: cd ../..
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc/build/vlc-$SDKNAME-$SHORT_ARCH/lib/*
          vlc/build/vlc-$SDKNAME-$SHORT_ARCH/include/*
  libvlc-ios-arm64:
    runs-on:
      - self-hosted
      - monterey
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARCH: aarch64
      SDKNAME: iphoneos
      VLC_PATH: "/Users/videolanci/sandbox/bin"
      SHORT_ARCH: arm64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: git clone REDACTED && cd vlc
    - run: mkdir build && cd build
    - run: "../extras/package/apple/build.sh --sdk=$SDKNAME --arch=$ARCH -j8 --enable-shared"
    - run: cd ../..
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc/build/vlc-$SDKNAME-$SHORT_ARCH/lib/*
          vlc/build/vlc-$SDKNAME-$SHORT_ARCH/include/*
  libvlcsharp-all:
    runs-on: ubuntu-latest
    container:
      image: "$VLC_DEBIAN_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARGS: "/p:UNITY=true"
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: wget REDACTED17b6759f-1af0-41bc-ab12-209ba0377779/e8d02195dbf1434b940e0f05ae086453/dotnet-sdk-6.0.100-linux-x64.tar.gz
    - run: mkdir -p $HOME/dotnet && tar zxf dotnet-sdk-6.0.100-linux-x64.tar.gz -C $HOME/dotnet
    - run: export DOTNET_ROOT=$HOME/dotnet
    - run: export PATH=$PATH:$HOME/dotnet
    - run: mkdir tmp && cd tmp && git clone REDACTED lvs
    - run: cd lvs
    - run: git checkout -f master
    - run: dotnet build src/LibVLCSharp/LibVLCSharp.csproj ${ARGS} -c Release
    - run: mkdir nightlies
      if: always()
    - run: cp -r tmp/lvs/src/LibVLCSharp/bin/Release/netstandard2.0 nightlies
      if: always()
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: nightlies/*
  libvlcsharp-ios:
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_DEBIAN_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARGS: "/p:UNITY_IOS=true"
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - run: wget REDACTED17b6759f-1af0-41bc-ab12-209ba0377779/e8d02195dbf1434b940e0f05ae086453/dotnet-sdk-6.0.100-linux-x64.tar.gz
    - run: mkdir -p $HOME/dotnet && tar zxf dotnet-sdk-6.0.100-linux-x64.tar.gz -C $HOME/dotnet
    - run: export DOTNET_ROOT=$HOME/dotnet
    - run: export PATH=$PATH:$HOME/dotnet
    - run: mkdir tmp && cd tmp && git clone REDACTED lvs
    - run: cd lvs
    - run: git checkout -f master
    - run: dotnet build src/LibVLCSharp/LibVLCSharp.csproj ${ARGS} -c Release
    - run: mkdir nightlies
      if: always()
    - run: cp -r tmp/lvs/src/LibVLCSharp/bin/Release/netstandard2.0 nightlies
      if: always()
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: nightlies/*
  unity-android-armv7:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_ANDROID_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ANDROID_ABI: armeabi-v7a
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-android-armv7
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: PKG_CONFIG_PATH=./vlc-android/libvlcjni/libvlc/jni/pkgconfig/${ANDROID_ABI} meson setup --cross-file=cross/android-${ANDROID_ABI}-ndk25.txt build_android_${ANDROID_ABI} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_android_${ANDROID_ABI}
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libvlc.so
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libc++_shared.so
          vlc-android/libvlcjni/libvlc/build/intermediates/aar_main_jar/release/classes.jar
          build_android_${ANDROID_ABI}/PluginSource/libVLCUnityPlugin.so
  unity-android-armv8:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_ANDROID_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ANDROID_ABI: arm64-v8a
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-android-armv8
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: PKG_CONFIG_PATH=./vlc-android/libvlcjni/libvlc/jni/pkgconfig/${ANDROID_ABI} meson setup --cross-file=cross/android-${ANDROID_ABI}-ndk25.txt build_android_${ANDROID_ABI} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_android_${ANDROID_ABI}
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libvlc.so
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libc++_shared.so
          vlc-android/libvlcjni/libvlc/build/intermediates/aar_main_jar/release/classes.jar
          build_android_${ANDROID_ABI}/PluginSource/libVLCUnityPlugin.so
  unity-android-x86:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_ANDROID_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ANDROID_ABI: x86
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-android-x86
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: PKG_CONFIG_PATH=./vlc-android/libvlcjni/libvlc/jni/pkgconfig/${ANDROID_ABI} meson setup --cross-file=cross/android-${ANDROID_ABI}-ndk25.txt build_android_${ANDROID_ABI} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_android_${ANDROID_ABI}
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libvlc.so
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libc++_shared.so
          vlc-android/libvlcjni/libvlc/build/intermediates/aar_main_jar/release/classes.jar
          build_android_${ANDROID_ABI}/PluginSource/libVLCUnityPlugin.so
  unity-android-x86_64:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_ANDROID_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ANDROID_ABI: x86_64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-android-x86_64
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: PKG_CONFIG_PATH=./vlc-android/libvlcjni/libvlc/jni/pkgconfig/${ANDROID_ABI} meson setup --cross-file=cross/android-${ANDROID_ABI}-ndk25.txt build_android_${ANDROID_ABI} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_android_${ANDROID_ABI}
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libvlc.so
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libc++_shared.so
          vlc-android/libvlcjni/libvlc/build/intermediates/aar_main_jar/release/classes.jar
          build_android_${ANDROID_ABI}/PluginSource/libVLCUnityPlugin.so
  unity-android-armv7-trial:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_ANDROID_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARGS_TRIAL: "-Dwatermark=true"
      ANDROID_ABI: armeabi-v7a
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-android-armv7
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: PKG_CONFIG_PATH=./vlc-android/libvlcjni/libvlc/jni/pkgconfig/${ANDROID_ABI} meson setup --cross-file=cross/android-${ANDROID_ABI}-ndk25.txt build_android_${ANDROID_ABI} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_android_${ANDROID_ABI}
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libvlc.so
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libc++_shared.so
          vlc-android/libvlcjni/libvlc/build/intermediates/aar_main_jar/release/classes.jar
          build_android_${ANDROID_ABI}/PluginSource/libVLCUnityPlugin.so
  unity-android-armv8-trial:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_ANDROID_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARGS_TRIAL: "-Dwatermark=true"
      ANDROID_ABI: arm64-v8a
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-android-armv8
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: PKG_CONFIG_PATH=./vlc-android/libvlcjni/libvlc/jni/pkgconfig/${ANDROID_ABI} meson setup --cross-file=cross/android-${ANDROID_ABI}-ndk25.txt build_android_${ANDROID_ABI} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_android_${ANDROID_ABI}
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: |-
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libvlc.so
          vlc-android/libvlcjni/libvlc/jni/libs/${ANDROID_ABI}/libc++_shared.so
          vlc-android/libvlcjni/libvlc/build/intermediates/aar_main_jar/release/classes.jar
          build_android_${ANDROID_ABI}/PluginSource/libVLCUnityPlugin.so
  unity-plugin-windows:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_WIN_LLVM_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      PLATFORM: windows
      CROSSFILE: windows-x86_64.txt
      BUILD_FOLDER: win64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-win-x86_64
    - run: PKG_CONFIG_PATH=./vlc/${BUILD_FOLDER}/_win32/lib/pkgconfig meson setup build_${PLATFORM} --cross-file=cross/${CROSSFILE} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${PLATFORM}
    - run: mv build_${PLATFORM}/PluginSource/libVLCUnityPlugin-1.dll VLCUnityPlugin.dll
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: VLCUnityPlugin.dll
  unity-plugin-windows-trial:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_WIN_LLVM_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      PLATFORM: windows
      CROSSFILE: windows-x86_64.txt
      ARGS_TRIAL: "-Dwatermark=true"
      BUILD_FOLDER: win64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-win-x86_64
    - run: PKG_CONFIG_PATH=./vlc/${BUILD_FOLDER}/_win32/lib/pkgconfig meson setup build_${PLATFORM} --cross-file=cross/${CROSSFILE} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${PLATFORM}
    - run: mv build_${PLATFORM}/PluginSource/libVLCUnityPlugin-1.dll VLCUnityPlugin.dll
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: VLCUnityPlugin.dll
  unity-plugin-uwp-x64:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_WIN_LLVM_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      PLATFORM: uwp
      BUILD_FOLDER: win64-uwp
      CROSSFILE: uwp-x86_64.txt
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-uwp-x64
    - run: PKG_CONFIG_PATH=./vlc/${BUILD_FOLDER}/_win32/lib/pkgconfig meson setup build_${PLATFORM} --cross-file=cross/${CROSSFILE} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${PLATFORM}
    - run: mv build_${PLATFORM}/PluginSource/libVLCUnityPlugin-1.dll VLCUnityPlugin.dll
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: VLCUnityPlugin.dll
  unity-plugin-uwp-x64-trial:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_WIN_LLVM_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      PLATFORM: uwp
      ARGS_TRIAL: "-Dwatermark=true"
      BUILD_FOLDER: win64-uwp
      CROSSFILE: uwp-x86_64.txt
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-uwp-x64
    - run: PKG_CONFIG_PATH=./vlc/${BUILD_FOLDER}/_win32/lib/pkgconfig meson setup build_${PLATFORM} --cross-file=cross/${CROSSFILE} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${PLATFORM}
    - run: mv build_${PLATFORM}/PluginSource/libVLCUnityPlugin-1.dll VLCUnityPlugin.dll
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: VLCUnityPlugin.dll
  unity-plugin-uwp-arm64:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - docker
      - amd64
    container:
      image: "$VLC_WIN_LLVM_IMAGE"
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      PLATFORM: uwp
      BUILD_FOLDER: winarm64-uwp
      CROSSFILE: uwp-arm64.txt
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-uwp-arm64
    - run: PKG_CONFIG_PATH=./vlc/${BUILD_FOLDER}/_win32/lib/pkgconfig meson setup build_${PLATFORM} --cross-file=cross/${CROSSFILE} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${PLATFORM}
    - run: mv build_${PLATFORM}/PluginSource/libVLCUnityPlugin-1.dll VLCUnityPlugin.dll
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: VLCUnityPlugin.dll
  unity-plugin-macos-x86_64:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - monterey
      - amd64
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARCH: x86_64
      VLC_PATH: "/Users/videolanci/sandbox/bin"
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-macos-x86_64
    - run: cd vlc/build/macos-install
    - run: sed -i '' "1s|.*|prefix=$(pwd | sed 's#/#\\\/#g')|" lib/pkgconfig/libvlc.pc
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: cd ../../..
    - run: PKG_CONFIG_PATH=./vlc/build/macos-install/lib/pkgconfig meson setup build_${ARCH} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${ARCH}
    - run: mv "build_${ARCH}/PluginSource/libVLCUnityPlugin.1.dylib" "build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib"
    - run: install_name_tool -add_rpath @loader_path/ build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib
  unity-plugin-macos-x86_64-trial:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - monterey
      - amd64
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARGS_TRIAL: "-Dwatermark=true"
      ARCH: x86_64
      VLC_PATH: "/Users/videolanci/sandbox/bin"
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-macos-x86_64
    - run: cd vlc/build/macos-install
    - run: sed -i '' "1s|.*|prefix=$(pwd | sed 's#/#\\\/#g')|" lib/pkgconfig/libvlc.pc
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: cd ../../..
    - run: PKG_CONFIG_PATH=./vlc/build/macos-install/lib/pkgconfig meson setup build_${ARCH} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${ARCH}
    - run: mv "build_${ARCH}/PluginSource/libVLCUnityPlugin.1.dylib" "build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib"
    - run: install_name_tool -add_rpath @loader_path/ build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib
  unity-plugin-macos-aarch64:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - monterey
      - macos-m1
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARCH: aarch64
      VLC_PATH: "/Users/videolanci/sandbox/bin"
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-macos-aarch64
    - run: cd vlc/build/macos-install
    - run: sed -i '' "1s|.*|prefix=$(pwd | sed 's#/#\\\/#g')|" lib/pkgconfig/libvlc.pc
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: cd ../../..
    - run: PKG_CONFIG_PATH=./vlc/build/macos-install/lib/pkgconfig meson setup build_${ARCH} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${ARCH}
    - run: mv "build_${ARCH}/PluginSource/libVLCUnityPlugin.1.dylib" "build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib"
    - run: install_name_tool -add_rpath @loader_path/ build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib
  unity-plugin-macos-aarch64-trial:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - monterey
      - macos-m1
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARGS_TRIAL: "-Dwatermark=true"
      ARCH: aarch64
      VLC_PATH: "/Users/videolanci/sandbox/bin"
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-macos-aarch64
    - run: cd vlc/build/macos-install
    - run: sed -i '' "1s|.*|prefix=$(pwd | sed 's#/#\\\/#g')|" lib/pkgconfig/libvlc.pc
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: cd ../../..
    - run: PKG_CONFIG_PATH=./vlc/build/macos-install/lib/pkgconfig meson setup build_${ARCH} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${ARCH}
    - run: mv "build_${ARCH}/PluginSource/libVLCUnityPlugin.1.dylib" "build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib"
    - run: install_name_tool -add_rpath @loader_path/ build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: build_${ARCH}/PluginSource/libVLCUnityPlugin.dylib
  unity-plugin-ios-aarch64:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - monterey
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARCH: aarch64
      SDKNAME: iphoneos
      VLC_PATH: "/Users/videolanci/sandbox/bin"
      SHORT_ARCH: arm64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-ios-arm64
    - run: cd vlc/build/vlc-$SDKNAME-$SHORT_ARCH
    - run: sed -i '' "1s|.*|prefix=$(pwd | sed 's#/#\\\/#g')|" lib/pkgconfig/libvlc.pc
    - run: cd ../../..
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: PKG_CONFIG_PATH=./vlc/build/vlc-$SDKNAME-$SHORT_ARCH/lib/pkgconfig meson setup --cross-file=cross/$SDKNAME.txt build_${SHORT_ARCH} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${SHORT_ARCH}
    - run: "./copy_ios.sh vlc/build/vlc-$SDKNAME-$SHORT_ARCH $SHORT_ARCH"
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: Assets/VLCUnity/Plugins/iOS
  unity-plugin-ios-aarch64-trial:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - monterey
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARGS_TRIAL: "-Dwatermark=true"
      ARCH: aarch64
      SDKNAME: iphoneos
      VLC_PATH: "/Users/videolanci/sandbox/bin"
      SHORT_ARCH: arm64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-ios-arm64
    - run: cd vlc/build/vlc-$SDKNAME-$SHORT_ARCH
    - run: sed -i '' "1s|.*|prefix=$(pwd | sed 's#/#\\\/#g')|" lib/pkgconfig/libvlc.pc
    - run: cd ../../..
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: PKG_CONFIG_PATH=./vlc/build/vlc-$SDKNAME-$SHORT_ARCH/lib/pkgconfig meson setup --cross-file=cross/$SDKNAME.txt build_${SHORT_ARCH} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${SHORT_ARCH}
    - run: "./copy_ios.sh vlc/build/vlc-$SDKNAME-$SHORT_ARCH $SHORT_ARCH"
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: Assets/VLCUnity/Plugins/iOS
  unity-plugin-ios-x86_64:
    needs:
    - libvlc-android-armv7
    - libvlc-android-armv8
    - libvlc-android-x86
    - libvlc-android-x86_64
    - libvlc-win-x86_64-debug
    - libvlc-win-x86_64
    - libvlc-uwp-x64
    - libvlc-uwp-arm64
    - libvlc-uwp-x64-debug
    - libvlc-macos-x86_64
    - libvlc-macos-aarch64
    - libvlc-ios-x86_64
    - libvlc-ios-arm64
    - libvlcsharp-all
    - libvlcsharp-ios
    runs-on:
      - self-hosted
      - monterey
    timeout-minutes: 60
    env:
      VLC_UWP_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-ucrt:20230523085945
      VLC_WIN_LLVM_IMAGE: registry.videolan.org/vlc-debian-llvm-msvcrt:20221214101739
      VLC_DEBIAN_IMAGE: registry.videolan.org/vlc-debian-unstable:20210803114245
      VLC_ANDROID_IMAGE: registry.videolan.org/vlc-debian-android:20230614051113
      ARCH: x86_64
      SDKNAME: iphonesimulator
      VLC_PATH: "/Users/videolanci/sandbox/bin"
      SHORT_ARCH: x86_64
    steps:
    - uses: actions/checkout@v4.1.0
      with:
        fetch-depth: 20
        lfs: true
    - uses: actions/download-artifact@v4.1.0
      with:
        name: libvlc-ios-x86_64
    - run: cd vlc/build/vlc-$SDKNAME-$SHORT_ARCH
    - run: sed -i '' "1s|.*|prefix=$(pwd | sed 's#/#\\\/#g')|" lib/pkgconfig/libvlc.pc
    - run: cd ../../..
    - run: export PATH="$HOME/sandbox/bin:$PATH"
    - run: PKG_CONFIG_PATH=./vlc/build/vlc-$SDKNAME-$SHORT_ARCH/lib/pkgconfig meson setup --cross-file=cross/$SDKNAME.txt build_${SHORT_ARCH} ${ARGS_TRIAL} --buildtype release
    - run: ninja -C build_${SHORT_ARCH}
    - run: "./copy_ios.sh vlc/build/vlc-$SDKNAME-$SHORT_ARCH $SHORT_ARCH"
    - uses: actions/upload-artifact@v4.1.0
      if: success()
      with:
        name: "${{ github.job }}"
        retention-days: 14
        path: Assets/VLCUnity/Plugins/iOS
